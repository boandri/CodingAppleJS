<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
        <link rel="stylesheet" href="main.css">
        <title>Sales template</title>
        <script src="https://code.jquery.com/jquery-3.6.3.min.js"
        integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU="
        crossorigin="anonymous"></script> 
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
    </head>
    <body>
        <!-- 기존 카드 html -->
        <!-- <div class="card-group container">
            <div class="card">
              <img src="https://via.placeholder.com/600">
              <div class="card-body">
                <h5>Card title</h5>
                <p>가격 : 70000</p>
                <button class="btn btn-danger">주문하기</button>
              </div>
            </div>-->
        


        <!-- 새로운 card 들어갈 container -->
        <div class="container">
          <div class="row">
            <span class="cardLayout"></span>
          </div>
        </div>

        <div class="container">
          <button class="btn btn-danger" id="more" >더보기</button>
        </div>    

        

        <script>
            //mock-data
            var products = [
              { id : 0, price : 70000, title : 'Blossom Dress' },
              { id : 1, price : 50000, title : 'Springfield Shirt' },
              { id : 2, price : 60000, title : 'Black Monastery' }
            ];

            // // 새로운 card 레이아웃 JS로 생성하기
            // for(var i = 0; i < 3; i++){
            //     $('.cardLayout').append(
            //       `<div class="col-sm-4">
            //         <img src="https://via.placeholder.com/600" class="w-100">
            //         <h5>Card title</h5>
            //         <p>가격 : 70000</p>
            //       </div>`)
            // }
            
            // // 새로운 데이터 바인딩 function
            // products.forEach(function(data, i){
            //     $('.col-sm-4 h5').eq(i).html(data.title);
            //     $('.col-sm-4 p').eq(i).html(`가격: ${data.price}`);
            // })

            // 위 2가지 합침 = 카드생성해서 데이터 바인딩하는 함수
            function newCardWData(data){
              data.forEach((a,i)=>{
                const template = 
                  `<div class="col-sm-4">
                    <img src="https://via.placeholder.com/600" class="w-100">
                    <h5>${a.title}</h5>
                    <p>가격 : ${a.price}</p>
                  </div>`
                $('.cardLayout').append(template);
              })
            }

            newCardWData(products);
        </script>


        <script>
          
          //버튼 몇번 눌렀눈지 count 
          let count = 0;

          //더보기 버튼 누르면 새로운 카드 3개 더 추가
          document.querySelector('#more').addEventListener('click', function(){
            if(count == 0){
              // 서버에서 ajax로 새로운 데이터 3개 더 가져오기
              $.get('https://codingapple1.github.io/js/more1.json')
              .done(function(data){
                newCardWData(data);
              })
              .fail(function(err){
                  console.log(err)
              });
              count++;
            } else if(count == 1){
              $.get('https://codingapple1.github.io/js/more2.json')
              .done((data)=>{
                newCardWData(data);
              }).fail((err)=>{
                console.log(err);
              })
              $('#more').addClass('hidMore')
            }
          })
          
          
        </script>




        <script>
            // 기존 데이터 바인딩 function
            // products.forEach(function(val, i){
            //     $('.card-body h5').eq(i).html(products[i].title)
            //     $('.card-body p').eq(i).html(`가격: ${products[i].price}`)
            // })
        </script>


        <script> 
            // 1-1. jQuery 로 ajax로 GET 요청하는법
                // $.get('https://codingapple1.github.io/price.json').done(function(data){
                //     console.log(data.price);
                // }).fail(function(){
                //     console.log('ajax 요청 실패했을때 나옴')
                // })


            // 1-2. 쌩JS로 ajax로 GET 요청하는법
                // fetch('https://codingapple1.github.io/price.json')
                //     .then(res => res.json()) // 원래는 데이터가 JSON형식의 string으로 오지만, object로 바꾸고싶기때문에 적어줌. 필요없으면 안적어도됨. (jQuery $.get()은 JSON => object로 자동변환해줌 )
                //     .then(data => {
                //         console.log(data)
                //     }).catch(error => {
                //         console.log('error')
                //     })
            
            // 2-1. jQuery 로 ajax로 POST요청하는법: 대충 이런식으로 param2에 보낼 데이터들을 넣어줌
                // $.post('https://codingapple1.github.io/hello.txt', {name: 'seowoo'}).done(function(data){
                //     console.log(data);
                // })


        </script> 
    </body>
</html>